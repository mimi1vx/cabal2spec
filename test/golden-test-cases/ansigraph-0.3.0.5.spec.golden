#
# spec file for package ansigraph
#
# Copyright (c) 2018 SUSE LINUX GmbH, Nuernberg, Germany.
#
# All modifications and additions to the file contributed by third parties
# remain the property of their copyright owners, unless otherwise agreed
# upon. The license for this file, and modifications and additions to the
# file, is the same license as for the pristine package itself (unless the
# license for the pristine package is not an Open Source License, in which
# case the license is the MIT License). An "Open Source License" is a
# license that conforms to the Open Source Definition (Version 1.9)
# published by the Open Source Initiative.

# Please submit bugfixes or comments via http://bugs.opensuse.org/
#

%global pkg_name ansigraph

%bcond_with tests

Name:           %{pkg_name}
Version:        0.3.0.5
Release:        0
Summary:        Terminal-based graphing via ANSI and Unicode
Group:          Development/Libraries/Haskell

License:        MIT
Url:            https://hackage.haskell.org/package/%{name}
Source0:        https://hackage.haskell.org/package/%{name}-%{version}/%{name}-%{version}.tar.gz

BuildRequires:  ghc-Cabal-devel
BuildRequires:  ghc-rpm-macros
BuildRequires:  ghc-ansi-terminal-devel
%if %{with tests}
BuildRequires:  ghc-QuickCheck-devel
BuildRequires:  ghc-hspec-devel
%endif

%description
Ansigraph is an ultralightweight terminal-based graphing utility. It uses
Unicode characters and ANSI escape codes to display and animate colored graphs
of vectors/functions in real and complex variables.

This functionality is provided by a 'Graphable' type class, whose method
'graphWith' draws a graph at the terminal. Another function 'animateWith' takes
a list of Graphable elements and displays an animation by rendering them in
sequence. Both of these functions take an options record as an argument.
The 'graph' and 'animate' functions are defined to use the default options, and
the user can define similar functions based on their own settings.

There are two main ways to use the package. Importing
"System.Console.Ansigraph" provides all the functionality we typically use.
This includes the /FlexibleInstances/ extension, which makes it marginally more
convenient to use graphing functions by allowing instances like 'Graphable
[Double]'.

If you want to use the package without activating /FlexibleInstances/ then you
can import "System.Console.Ansigraph.Core", which provides everything except
these instances. Then you must use one of a few newtype wrappers, namely:
'Graph', 'PosGraph', 'CGraph', 'Mat', 'CMat'. These wrappers are also available
from the standard 'Ansigraph' module.

The "System.Console.Ansigraph.Examples" module contains examples of all the
graph types, and also shows the available ANSI colors.


%package -n ghc-%{name}
Summary:        Haskell %{name} library
Group:          System/Libraries

%description -n ghc-%{name}
This package provides the Haskell %{name} shared library.


%package -n ghc-%{name}-devel
Summary:        Haskell %{name} library development files
Group:          Development/Libraries/Haskell
Requires:       ghc-compiler = %{ghc_version}
Requires(post): ghc-compiler = %{ghc_version}
Requires(postun): ghc-compiler = %{ghc_version}
Requires:       ghc-%{name} = %{version}-%{release}

%description -n ghc-%{name}-devel
This package provides the Haskell %{name} library development files.


%prep
%setup -q

%build
%ghc_lib_build

%install
%ghc_lib_install

%check
%cabal_test

%post -n ghc-%{name}-devel
%ghc_pkg_recache

%postun -n ghc-%{name}-devel
%ghc_pkg_recache

%files
%doc LICENSE
%doc CHANGELOG.md README.md

%files -n ghc-%{name} -f ghc-%{name}.files
%defattr(-,root,root,-)
%doc LICENSE

%files -n ghc-%{name}-devel -f ghc-%{name}-devel.files
%defattr(-,root,root,-)
%doc CHANGELOG.md README.md

%changelog
